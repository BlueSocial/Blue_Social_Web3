"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useConnectCore = void 0;
const react_1 = require("react");
function useConnectCore(manager, options) {
    const { connect } = manager;
    const [isConnecting, setIsConnecting] = (0, react_1.useState)(false);
    const [error, setError] = (0, react_1.useState)(null);
    const handleConnection = (0, react_1.useCallback)(async (walletOrFn) => {
        // reset error state
        setError(null);
        if (typeof walletOrFn !== "function") {
            return connect(walletOrFn, options);
        }
        setIsConnecting(true);
        try {
            const w = await walletOrFn();
            return connect(w, options);
        }
        catch (e) {
            console.error(e);
            setError(e);
        }
        finally {
            setIsConnecting(false);
        }
        return null;
    }, [connect, options]);
    return { connect: handleConnection, isConnecting, error };
}
exports.useConnectCore = useConnectCore;
//# sourceMappingURL=useConnect.js.map